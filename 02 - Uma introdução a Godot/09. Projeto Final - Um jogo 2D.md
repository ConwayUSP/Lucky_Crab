# Projeto Final

Muito bem caro aluno! Se você chegou até aqui foi graças ao seu esforço e perseverança. Você teve uma introdução à linguagem Rust e ao Game Engine Godot e como utilizá-los juntos. Agora chegou a hora de construirmos um jogo juntos para colocar em prática tudo que aprendemos.

## Especificações

O jogo que iremos construir se chama *"Dodge the Creeps"* ("Desvie das Criaturas"), será uma adaptação do jogo tutorial feito pelo Tutorial Oficial do Godot, a diferença é que usaremos Rust ao invés de GDScript. Isso é ótimo pois teremos um ponto de referência para o nosso projeto, o qual podemos voltar para comparar e tirar dúvidas. Se quiser ver o tutorial original [clique aqui](https://docs.godotengine.org/pt-br/4.x/getting_started/first_2d_game/).

> Nota: utilizaremos os mesmos assets (imagens e etc) que o tutorial original. Produzido por eles. Todos os direitos são reservados ao Godot Engine.

Ademais, o código fonte do projeto pode ser encontrado no nosso github: [TODO: inserir link aqui]()

## Criando nosso projeto

Antes de mais nada baixe os assets para o jogo nesse link
[dodge_the_creeps_2d_assets.zip](https://github.com/godotengine/godot-docs-project-starters/releases/download/latest-4.x/dodge_the_creeps_2d_assets.zip). Vamos criar um novo projeto, seguiremos as mesmas etapas do capítulo 5 de scripts. Em uma pasta chamada `dodge-the-creeps` (ou o que você quiser).

### Configuração do Rust
Crie uma nova biblioteca do Rust: `cargo new rust --lib`. Entre nessa pasta e adicione a biblioteca do godot com `cargo add godot`. Agora, configure o arquivo `Cargo.toml` para que ele fique da seguinte forma:
```toml
[package]
name = "dodge_the_creeps"
version = "0.1.0"
edition = "2024"

[lib]
crate-type = ["cdylib"]

[dependencies]
godot = "0.2.4"
```
Feito isso, vamos adicionar o _boilerplate_ da biblioteca, substitua o código no arquivo `src/lib.rs` por este:
```rust
use godot::prelude::*;

struct GameExtension;

#[gdextension]
unsafe impl ExtensionLibrary for GameExtension {}
```
> Dei o nome de `GameExtension` para nossa extensão, mas você pode escolher o nome que preferir.

Isto feito, compile a biblioteca com `cargo build`. Se tudo deu certo, podemos ir para o _setup_ do Godot.

### Configuração do Godot

Abra o Godot e crie um novo projeto dentro da pasta raiz. Darei o nome do projeto de `Dodge the Creeps`, mas a pasta se chamará `godot`. Veja na imagem abaixo:

<img width="250" height="250" alt="tela de criação de projetos do godot" src="https://github.com/user-attachments/assets/138a5d13-9038-4b51-9eed-4e22cbede11f" />

Agora dentro da interface do Godot vamos configurar adicionar nossos _assets_,  mas antes precisamos configurar a _viewport_ (tamanho da tela) que nosso jogo terá. Em _Project_ > _Project Settings_>, encontre a aba _Display_ e clique na opção _Window_, modifique os atributos _Viewport width_ e _Viewport height_ para `480` e `720` respectivamente. Agora nas opções de _Stretch_, configure _Mode_ para `canvas_item` e _Aspect_ para `keep`. Desse modo, nossa tela vai se manter consistente para diferentes tamanhos de tela.

Voltando aos nossos assets, extraia os arquivos dentro da pasta `godot`, o resultado serão duas pastas, `fonts` e `art`. Usaremos esses recursos nas próximas etapas. O seus sistema de arquivos deve ficar da seguinte forma:

<img width="293" height="286" alt="sistema de arquivos do godot" src="https://github.com/user-attachments/assets/24dd0219-35aa-44e7-a366-6ea8dfa55d6c" />

Isso feito, crie um arquivo `DodgeTheCreeps.gdextension` e escreva as seguintes linhas.
```toml
[configuration]
entry_symbol = "gdext_rust_init"
compatibility_minimum = 4.1
reloadable = true

[libraries]
linux.debug.x86_64 =     "res://../rust/target/debug/libdodge_the_creeps.so"
linux.release.x86_64 =   "res://../rust/target/release/libdodge_the_creeps.so"
windows.debug.x86_64 =   "res://../rust/target/debug/dodge_the_creeps.dll"
windows.release.x86_64 = "res://../rust/target/release/dodge_the_creeps.dll"
macos.debug =            "res://../rust/target/debug/libdodge_the_creeps.dylib"
macos.release =          "res://../rust/target/release/libdodge_the_creeps.dylib"
macos.debug.arm64 =      "res://../rust/target/debug/libdodge_the_creeps.dylib"
macos.release.arm64 =    "res://../rust/target/release/libdodge_the_creeps.dylib"
```

Muito bem, com isso nosso projeto está configurado, vamos partir para as próximas etapas.

## Criando o jogador
